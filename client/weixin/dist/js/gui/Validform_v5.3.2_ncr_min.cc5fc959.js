!function(t,i,e){function a(i,e){var a=(t(window).width()-i.outerWidth())/2,r=(t(window).height()-i.outerHeight())/2,r=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(r>0?r:0);i.css({left:a}).animate({top:r},{duration:e,queue:!1})}function r(){return 0===t("#Validform_msg").length&&(n=t('<div id="Validform_msg"><div class="Validform_title">'+o.tit+'<a class="Validform_close" href="javascript:void(0);">&chi;</a></div><div class="Validform_info"></div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"></iframe></div></div>').appendTo("body"),n.find("a.Validform_close").click(function(){return n.hide(),l=!0,s&&s.focus().addClass("Validform_error"),!1}).focus(function(){this.blur()}),void t(window).bind("scroll resize",function(){!l&&a(n,400)}))}var s=null,n=null,l=!0,o={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！",n:"请填写数字！","n6-16":"请填写6到16位数字！",s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"通过信息验证！",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"};t.Tipmsg=o;var c=function(i,a,s){var a=t.extend({},c.defaults,a);a.datatype&&t.extend(c.util.dataType,a.datatype);var n=this;return n.tipmsg={w:{}},n.settings=a,n.forms=i,n.objects=[],s!==!0&&(i.each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var i=t(this);this.validform_status="normal",this.validform_label=a.label,i.data("tipmsg",n.tipmsg),i.delegate("[datatype]","blur",function(){var t=arguments[1];c.util.check.call(this,i,n,t)}),c.util.enhance.call(i,a.tiptype,a.usePlugin,a.tipSweep),a.btnSubmit&&i.find(a.btnSubmit).bind("click",function(){return i.trigger("submit"),!1}),i.submit(function(){var t=c.util.submitForm.call(i,a);return t===e&&(t=!0),t}),i.find("[type='reset']").add(i.find(a.btnReset)).bind("click",function(){c.util.resetForm.call(i)})}),void((1==a.tiptype||(2==a.tiptype||3==a.tiptype)&&a.ajaxPost)&&r()))};c.defaults={tiptype:1,tipSweep:!1,showAllError:!1,postonce:!1,ajaxPost:!1},c.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},toString:Object.prototype.toString,isEmpty:function(i){return""===i||i===t.trim(this.attr("tip"))},getValue:function(i){var a,r=this;return i.is(":radio")?(a=r.find(":radio[name='"+i.attr("name")+"']:checked").val(),a=a===e?"":a):i.is(":checkbox")?(a="",r.find(":checkbox[name='"+i.attr("name")+"']:checked").each(function(){a+=t(this).val()+","}),a=a===e?"":a):a=i.val(),a=t.trim(a),c.util.isEmpty.call(i,a)?"":a},enhance:function(i,e,a,r){var s=this;s.find("[datatype]").each(function(){2==i?0==t(this).parent().next().find(".Validform_checktip").length&&t(this).parent().next().append("<span class='Validform_checktip' />"):3!=i&&4!=i||0==t(this).siblings(".Validform_checktip").length&&t(this).parent().append("<span class='Validform_checktip' />")}),s.find("input[recheck]").each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var i=t(this),e=s.find("input[name='"+t(this).attr("recheck")+"']");e.bind("keyup",function(){if(e.val()==i.val()&&""!=e.val()){if(e.attr("tip")&&e.attr("tip")==e.val())return!1;i.trigger("blur")}}).bind("blur",function(){if(e.val()!=i.val()&&""!=i.val()){if(i.attr("tip")&&i.attr("tip")==i.val())return!1;i.trigger("blur")}})}),s.find("[tip]").each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var i=t(this).attr("tip"),e=t(this).attr("altercss");t(this).focus(function(){t(this).val()==i&&(t(this).val(""),e&&t(this).removeClass(e))}).blur(function(){""===t.trim(t(this).val())&&(t(this).val(i),e&&t(this).addClass(e))})}),s.find(":checkbox[datatype],:radio[datatype]").each(function(){if("inited"==this.validform_inited)return!0;this.validform_inited="inited";var i=t(this),e=i.attr("name");s.find("[name='"+e+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){i.trigger("blur")},0)})}),s.find("select[datatype][multiple]").bind("click",function(){var i=t(this);setTimeout(function(){i.trigger("blur")},0)}),c.util.usePlugin.call(s,e,i,a,r)},usePlugin:function(i,e,a,r){var s=this,i=i||{};if(s.find("input[plugin='swfupload']").length&&"undefined"!=typeof swfuploadhandler){var n={custom_settings:{form:s,showmsg:function(t,i,r){c.util.showmsg.call(s,t,e,{obj:s.find("input[plugin='swfupload']"),type:i,sweep:a})}}};n=t.extend(!0,{},i.swfupload,n),s.find("input[plugin='swfupload']").each(function(i){return"inited"==this.validform_inited||(this.validform_inited="inited",t(this).val(""),void swfuploadhandler.init(n,i))})}if(s.find("input[plugin='datepicker']").length&&t.fn.datePicker&&(i.datepicker=i.datepicker||{},i.datepicker.format&&(Date.format=i.datepicker.format,delete i.datepicker.format),i.datepicker.firstDayOfWeek&&(Date.firstDayOfWeek=i.datepicker.firstDayOfWeek,delete i.datepicker.firstDayOfWeek),s.find("input[plugin='datepicker']").each(function(e){return"inited"==this.validform_inited||(this.validform_inited="inited",i.datepicker.callback&&t(this).bind("dateSelected",function(){var e=new Date(t.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);i.datepicker.callback(e,this)}),void t(this).datePicker(i.datepicker))})),s.find("input[plugin*='passwordStrength']").length&&t.fn.passwordStrength&&(i.passwordstrength=i.passwordstrength||{},i.passwordstrength.showmsg=function(t,i,r){c.util.showmsg.call(s,i,e,{obj:t,type:r,sweep:a})},s.find("input[plugin='passwordStrength']").each(function(e){return"inited"==this.validform_inited||(this.validform_inited="inited",void t(this).passwordStrength(i.passwordstrength))})),"addRule"!=r&&i.jqtransform&&t.fn.jqTransSelect){var l=function(i){var e=t(".jqTransformSelectWrapper ul:visible");e.each(function(){var e=t(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);i&&e.oLabel&&e.oLabel.get(0)==i.get(0)||t(this).hide()})},o=function(i){0===t(i.target).parents(".jqTransformSelectWrapper").length&&l(t(i.target))},d=function(){t(document).mousedown(o)};i.jqtransform.selector?(s.find(i.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton(),s.find(i.jqtransform.selector).filter("input:text, input:password").jqTransInputText(),s.find(i.jqtransform.selector).filter("input:checkbox").jqTransCheckBox(),s.find(i.jqtransform.selector).filter("input:radio").jqTransRadio(),s.find(i.jqtransform.selector).filter("textarea").jqTransTextarea(),s.find(i.jqtransform.selector).filter("select").length>0&&(s.find(i.jqtransform.selector).filter("select").jqTransSelect(),d())):s.jqTransform(),s.find(".jqTransformSelectWrapper").find("li a").click(function(){t(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(t){var i,e=this,a=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g,r=t[0].validform_label||".Validform_label";if(r=e.siblings(r).text()||e.siblings().find(r).text()||e.parent().siblings(r).text()||e.parent().siblings().find(r).text(),r=r.match(a)||[""],a=/\{(.+)\|(.+)\}/,i=t.data("tipmsg").s||o.s,r=r[0].replace(/\s(?![a-zA-Z])/g,""),""!=r){if(i=i.replace(/\{0\|(.+)\}/,r),e.attr("recheck"))return i=i.replace(/\{(.+)\}/,""),e.attr("nullmsg",i),i}else i=e.is(":checkbox,:radio,select")?i.replace(/\{0\|(.+)\}/,""):i.replace(/\{0\|(.+)\}/,"$1");return i=e.is(":checkbox,:radio,select")?i.replace(a,"$2"):i.replace(a,"$1"),e.attr("nullmsg",i),i},getErrormsg:function(t,i,e){var a,r=/^(.+?)((\d+)-(\d+))?$/,s=/^(.+?)(\d+)-(\d+)$/,n=/(.*?)\d+(.+?)\d+(.*)/,l=i.match(r);if("recheck"==e)return a=t.data("tipmsg").reck||o.reck;if(l[0]in o.w)return t.data("tipmsg").w[l[0]]||o.w[l[0]];for(var c in o.w)if(c.indexOf(l[1])!=-1&&s.test(c))return a=(t.data("tipmsg").w[c]||o.w[c]).replace(n,"$1"+l[3]+"$2"+l[4]+"$3"),o.w[l[0]]=a,a;return t.data("tipmsg").def||o.def},_regcheck:function(t,i,a,r){var r=r,s=null,n=!1,l=/\/.+\//g,d=/^(.+?)(\d+)-(\d+)$/,f=3;if(l.test(t)){var u=t.match(l)[0].slice(1,-1),p=t.replace(l,""),m=RegExp(u,p);n=m.test(i)}else if("[object Function]"==c.util.toString.call(c.util.dataType[t]))n=c.util.dataType[t](i,a,r,c.util.dataType),n===!0||n===e?n=!0:(s=n,n=!1);else{if(!(t in c.util.dataType)){var h,g=t.match(d);if(g){for(var v in c.util.dataType)if(h=v.match(d),h&&g[1]===h[1]){var b=c.util.dataType[v].toString(),p=b.match(/\/[mgi]*/g)[1].replace("/",""),y=new RegExp("\\{"+h[2]+","+h[3]+"\\}","g");b=b.replace(/\/[mgi]*/g,"/").replace(y,"{"+g[2]+","+g[3]+"}").replace(/^\//,"").replace(/\/$/,""),c.util.dataType[t]=new RegExp(b,p);break}}else n=!1,s=r.data("tipmsg").undef||o.undef}"[object RegExp]"==c.util.toString.call(c.util.dataType[t])&&(n=c.util.dataType[t].test(i))}if(n){if(f=2,s=a.attr("sucmsg")||r.data("tipmsg").r||o.r,a.attr("recheck")){var w=r.find("input[name='"+a.attr("recheck")+"']:first");i!=w.val()&&(n=!1,f=3,s=a.attr("errormsg")||c.util.getErrormsg.call(a,r,t,"recheck"))}}else s=s||a.attr("errormsg")||c.util.getErrormsg.call(a,r,t),c.util.isEmpty.call(a,i)&&(s=a.attr("nullmsg")||c.util.getNullmsg.call(a,r));return{passed:n,type:f,info:s}},regcheck:function(t,i,e){var a=this,r=null;if("ignore"===e.attr("ignore")&&c.util.isEmpty.call(e,i))return e.data("cked")&&(r=""),{passed:!0,type:4,info:r};e.data("cked","cked");for(var s,n=c.util.parseDatatype(t),l=0;l<n.length;l++){for(var o=0;o<n[l].length&&(s=c.util._regcheck(n[l][o],i,e,a),s.passed);o++);if(s.passed)break}return s},parseDatatype:function(t){var i=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,e=t.match(i),a=t.replace(i,"").replace(/\s*/g,"").split(""),r=[],s=0;r[0]=[],r[0].push(e[0]);for(var n=0;n<a.length;n++)"|"==a[n]&&(s++,r[s]=[]),r[s].push(e[n+1]);return r},showmsg:function(i,r,s,o){if(i!=e&&("bycheck"!=o||!s.sweep||(!s.obj||s.obj.is(".Validform_error"))&&"function"!=typeof r)){if(t.extend(s,{curform:this}),"function"==typeof r)return void r(i,s,c.util.cssctl);(1==r||"byajax"==o&&4!=r)&&n.find(".Validform_info").html(i),(1==r&&"bycheck"!=o&&2!=s.type||"byajax"==o&&4!=r)&&(l=!1,n.find(".iframe").css("height",n.outerHeight()),n.show(),a(n,100)),2==r&&s.obj&&(s.obj.parent().next().find(".Validform_checktip").html(i),c.util.cssctl(s.obj.parent().next().find(".Validform_checktip"),s.type)),3!=r&&4!=r||!s.obj||(s.obj.siblings(".Validform_checktip").html(i),c.util.cssctl(s.obj.siblings(".Validform_checktip"),s.type))}},cssctl:function(t,i){switch(i){case 1:t.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:t.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");break;case 4:t.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:t.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")}},check:function(i,e,a,r){var n=e.settings,a=a||"",l=c.util.getValue.call(i,t(this));if(n.ignoreHidden&&t(this).is(":hidden")||"dataIgnore"===t(this).data("dataIgnore"))return!0;if(n.dragonfly&&!t(this).data("cked")&&c.util.isEmpty.call(t(this),l)&&"ignore"!=t(this).attr("ignore"))return!1;var d=c.util.regcheck.call(i,t(this).attr("datatype"),l,t(this));if(l==this.validform_lastval&&!t(this).attr("recheck")&&""==a)return!!d.passed;this.validform_lastval=l;var f;if(s=f=t(this),!d.passed)return c.util.abort.call(f[0]),r||(c.util.showmsg.call(i,d.info,n.tiptype,{obj:t(this),type:d.type,sweep:n.tipSweep},"bycheck"),!n.tipSweep&&f.addClass("Validform_error")),!1;var u=t(this).attr("ajaxurl");if(u&&!c.util.isEmpty.call(t(this),l)&&!r){var p=t(this);if("postform"==a?p[0].validform_subpost="postform":p[0].validform_subpost="","posting"===p[0].validform_valid&&l==p[0].validform_ckvalue)return"ajax";p[0].validform_valid="posting",p[0].validform_ckvalue=l,c.util.showmsg.call(i,e.tipmsg.c||o.c,n.tiptype,{obj:p,type:1,sweep:n.tipSweep},"bycheck"),c.util.abort.call(f[0]);var m=i[0].validform_config||{};m=m.ajaxurl||{};var h={type:"POST",cache:!1,url:u,data:"param="+encodeURIComponent(l)+"&name="+encodeURIComponent(t(this).attr("name")),success:function(a){"y"===t.trim(a.status)?(p[0].validform_valid="true",a.info&&p.attr("sucmsg",a.info),c.util.showmsg.call(i,p.attr("sucmsg")||e.tipmsg.r||o.r,n.tiptype,{obj:p,type:2,sweep:n.tipSweep},"bycheck"),f.removeClass("Validform_error"),s=null,"postform"==p[0].validform_subpost&&i.trigger("submit")):(p[0].validform_valid=a.info,c.util.showmsg.call(i,a.info,n.tiptype,{obj:p,type:3,sweep:n.tipSweep}),f.addClass("Validform_error")),f[0].validform_ajax=null},error:function(t){if("200"==t.status)return"y"==t.responseText?m.success({status:"y"}):m.success({status:"n",info:t.responseText}),!1;if("abort"!==t.statusText){var e="status: "+t.status+"; statusText: "+t.statusText;c.util.showmsg.call(i,e,n.tiptype,{obj:p,type:3,sweep:n.tipSweep}),f.addClass("Validform_error")}return p[0].validform_valid=t.statusText,f[0].validform_ajax=null,!0}};if(m.success){var g=m.success;m.success=function(t){h.success(t),g(t,p)}}if(m.error){var v=m.error;m.error=function(t){h.error(t)&&v(t,p)}}return m=t.extend({},h,m,{dataType:"json"}),f[0].validform_ajax=t.ajax(m),"ajax"}return u&&c.util.isEmpty.call(t(this),l)&&(c.util.abort.call(f[0]),f[0].validform_valid="true"),r||(c.util.showmsg.call(i,d.info,n.tiptype,{obj:t(this),type:d.type,sweep:n.tipSweep},"bycheck"),f.removeClass("Validform_error")),s=null,!0},submitForm:function(i,e,a,r,n){var l=this;if("posting"===l[0].validform_status)return!1;if(i.postonce&&"posted"===l[0].validform_status)return!1;var d=i.beforeCheck&&i.beforeCheck(l);if(d===!1)return!1;var f,u=!0;if(l.find("[datatype]").each(function(){if(e)return!1;if(i.ignoreHidden&&t(this).is(":hidden")||"dataIgnore"===t(this).data("dataIgnore"))return!0;var a,r=c.util.getValue.call(l,t(this));if(s=a=t(this),f=c.util.regcheck.call(l,t(this).attr("datatype"),r,t(this)),!f.passed)return c.util.showmsg.call(l,f.info,i.tiptype,{obj:t(this),type:f.type,sweep:i.tipSweep}),a.addClass("Validform_error"),i.showAllError?(u&&(u=!1),!0):(a.focus(),u=!1,!1);if(t(this).attr("ajaxurl")&&!c.util.isEmpty.call(t(this),r)){if("true"!==this.validform_valid){var n=t(this);return c.util.showmsg.call(l,l.data("tipmsg").v||o.v,i.tiptype,{obj:n,type:3,sweep:i.tipSweep}),a.addClass("Validform_error"),n.trigger("blur",["postform"]),i.showAllError?(u&&(u=!1),!0):(u=!1,!1)}}else t(this).attr("ajaxurl")&&c.util.isEmpty.call(t(this),r)&&(c.util.abort.call(this),this.validform_valid="true");c.util.showmsg.call(l,f.info,i.tiptype,{obj:t(this),type:f.type,sweep:i.tipSweep}),a.removeClass("Validform_error"),s=null}),i.showAllError&&l.find(".Validform_error:first").focus(),u){var p=i.beforeSubmit&&i.beforeSubmit(l);if(p===!1)return!1;l[0].validform_status="posting";var m=l[0].validform_config||{};if(!i.ajaxPost&&"ajaxPost"!==r){i.postonce||(l[0].validform_status="normal");var a=a||m.url;return a&&l.attr("action",a),i.callback&&i.callback(l)}var h=m.ajaxpost||{};if(h.url=a||h.url||m.url||l.attr("action"),h.success||h.error||c.util.showmsg.call(l,l.data("tipmsg").p||o.p,i.tiptype,{obj:l,type:1,sweep:i.tipSweep},"byajax"),n?h.async=!1:n===!1&&(h.async=!0),h.success){var g=h.success;h.success=function(e){i.callback&&i.callback(e),l[0].validform_ajax=null,"y"===t.trim(e.status)?l[0].validform_status="posted":l[0].validform_status="normal",g(e,l)}}if(h.error){var v=h.error;h.error=function(t){i.callback&&i.callback(t),l[0].validform_status="normal",l[0].validform_ajax=null,v(t,l)}}var b={type:"POST",async:!0,data:l.serializeArray(),success:function(e){"y"===t.trim(e.status)?(l[0].validform_status="posted",c.util.showmsg.call(l,e.info,i.tiptype,{obj:l,type:2,sweep:i.tipSweep},"byajax")):(l[0].validform_status="normal",c.util.showmsg.call(l,e.info,i.tiptype,{obj:l,type:3,sweep:i.tipSweep},"byajax")),i.callback&&i.callback(e),l[0].validform_ajax=null},error:function(t){var e="status: "+t.status+"; statusText: "+t.statusText;c.util.showmsg.call(l,e,i.tiptype,{obj:l,type:3,sweep:i.tipSweep},"byajax"),i.callback&&i.callback(t),l[0].validform_status="normal",l[0].validform_ajax=null}};h=t.extend({},b,h,{dataType:"json"}),l[0].validform_ajax=t.ajax(h)}return!1},resetForm:function(){var t=this;t.each(function(){this.reset(),this.validform_status="normal"}),t.find(".Validform_right").text(""),t.find(".passwordStrength").children().removeClass("bgStrength"),t.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading"),t.find(".Validform_error").removeClass("Validform_error"),t.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null}),t.eq(0).find("input:first").focus()},abort:function(){this.validform_ajax&&this.validform_ajax.abort()}},t.Datatype=c.util.dataType,c.prototype={dataType:c.util.dataType,eq:function(i){var e=this;return i>=e.forms.length?null:(i in e.objects||(e.objects[i]=new c(t(e.forms[i]).get(),e.settings,(!0))),e.objects[i])},resetStatus:function(){var i=this;return t(i.forms).each(function(){this.validform_status="normal"}),this},setStatus:function(i){var e=this;return t(e.forms).each(function(){this.validform_status=i||"posting"}),this},getStatus:function(){var i=this,e=t(i.forms)[0].validform_status;return e},ignore:function(i){var e=this,i=i||"[datatype]";return t(e.forms).find(i).each(function(){t(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")}),this},unignore:function(i){var e=this,i=i||"[datatype]";return t(e.forms).find(i).each(function(){t(this).removeData("dataIgnore")}),this},addRule:function(i){for(var e=this,i=i||[],a=0;a<i.length;a++){var r=t(e.forms).find(i[a].ele);for(var s in i[a])"ele"!==s&&r.attr(s,i[a][s])}return t(e.forms).each(function(){var i=t(this);c.util.enhance.call(i,e.settings.tiptype,e.settings.usePlugin,e.settings.tipSweep,"addRule")}),this},ajaxPost:function(i,e,a){var s=this;return 1!=s.settings.tiptype&&2!=s.settings.tiptype&&3!=s.settings.tiptype||r(),c.util.submitForm.call(t(s.forms[0]),s.settings,i,a,"ajaxPost",e),this},submitForm:function(i,a){var r=this,s=c.util.submitForm.call(t(r.forms[0]),r.settings,i,a);return s===e&&(s=!0),s===!0&&r.forms[0].submit(),this},resetForm:function(){var i=this;return c.util.resetForm.call(t(i.forms)),this},abort:function(){var i=this;return t(i.forms).each(function(){c.util.abort.call(this)}),this},check:function(i,e){var e=e||"[datatype]",a=this,r=t(a.forms),s=!0;return r.find(e).each(function(){c.util.check.call(this,r,a,"",i)||(s=!1)}),s},config:function(i){var e=this;return i=i||{},t(e.forms).each(function(){this.validform_config=t.extend(!0,this.validform_config,i)}),this}},t.fn.Validform=function(t){return new c(this,t)},t.Showmsg=function(t){r(),c.util.showmsg.call(i,t,1,{})},t.Hidemsg=function(){n.hide(),l=!0}}(jQuery,window);