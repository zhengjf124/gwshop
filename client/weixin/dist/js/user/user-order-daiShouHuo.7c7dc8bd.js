!function(o){function t(){this.init()}t.prototype={init:function(){this.initEvent(),this.getData()},getData:function(){var o=this;Pub.post("/Home/order/index",{},function(t){0==t.error_code&&(o.orderList(t.data.list),o.initEv())})},orderList:function(t){o("#order_list").empty();var i="";if(t&&t.length>0){for(var e in t)if(210==t[e].order_status){i+='<div class="order-item"><div class="order-status"><a href="'+Pub.getHtmlUrl("html/user/user-order-cont.2f5cebff.html")+"?id="+t[e].id+'"><span>'+t.list[e].order_sn+'</span><strong>待收货</strong></a></div><div class="complete-goods"><a href="'+Pub.getHtmlUrl("html/user/user-order-cont.2f5cebff.html")+"?id="+t[e].id+'"><ul>';for(var n in t[e].goods){i+='<li><div class="img"><span></span><img src="'+t[e].goods[n].goods_img+'"></div><div class="info"><div class="name"><h4>'+t[e].goods[n].goods_name+'</h4></div><div class="sizes">';var r=t[e].goods[n].spec_key_name.split(" ");for(var s in r)i+="<h4>"+r[s]+"</h4>";i+='</div><div class="price"><h4>￥ '+t[e].goods[n].goods_price+"</h4><h3>X "+t[e].goods[n].goods_num+"</h3></div></div></li>"}i+='</ul></a><div class="complete-total"><h3 style="text-align: right;">实付款： <span>￥ '+t[e].order_amount+'</span></h3></div><div class="handle"><button class="order-confirm" data-index="'+t[e].id+'">确认收货</button><button>查看物流</button></div></div></div>'}o("#order_list").append(i)}},initEvent:function(){o("#order_menu").on("click",function(){o("#order_menu_show").show(),o("#order_menu_black").show()}),o("#order_menu_black").on("click",function(){o("#order_menu_show").hide(),o("#order_menu_black").hide()})},initEv:function(){o(".order-confirm").on("click",function(){var t=o(this).attr("data-index"),i=this;cloud.asked("您确定收货吗？",function(){Pub.post("/Home/order/delivery",{id:t},function(t){console.log(t),0==t.error_code&&(cloud.explain("您已成功收货！","success",2e3),o(i).text("去评价"),o(i).removeClass("order-confirm"),o(i).addClass("order-comment")),o(".order-comment").on("click",function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0;var i=o(this).attr("data-index"),e=Pub.getHtmlUrl("html/user/user-judge.4adde8c4.html")+"?id="+i;location.href=e})})},function(){cloud.msg("您选择了取消","50%",2e3)})}),o(".order-comment").on("click",function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0;var i=o(this).attr("data-index"),e=Pub.getHtmlUrl("html/user/user-judge.4adde8c4.html")+"?id="+i;location.href=e})}},new t}(jQuery);