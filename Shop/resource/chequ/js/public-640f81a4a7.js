window.console=window.console||function(){var e={};return e.log=e.warn=e.debug=e.info=e.error=e.time=e.dir=e.profile=e.clear=e.exception=e.trace=e.assert=function(){},e}(),+function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"==typeof exports)module.exports=t(require("jquery"));else{var n=t(jQuery);e.Pub=n}}(this,function(e){var t={debug:!0,clientRoot:"/chequ/",post:function(e,t,n,o){return this._ajax(e,t,n,o)},get:function(e,t,n,o){return this._ajax(e,t,n,o,"get")},_ajax:function(t,n,o,r,i){var a,s=this;e.isFunction(n)&&(r=r||o,o=n,n=void 0),t=this.getAbsoluteUrl(t),t.indexOf("_passport")===-1&&e.isPlainObject(n)&&!n.entriedCode?n=e.extend(this.getAuthInfo(),n):t.indexOf("_passport")===-1&&void 0===n&&(n=this.getAuthInfo()),e.isFunction(o)&&(a=function(e,t,n){e=s.catchCommonError(e),o(e,t,n)});var c=new e.Deferred,u="get"===i?e.get(t,n,a,r):e.post(t,n,a,r);u.then(function(e,t,n){e=s.catchCommonError(e),c.resolveWith(this,[e,t,n])},function(e,t,n){c.rejectWith(this,[e,t,n])});var l=c.promise();return l.abort=function(){u.abort(),c.reject("abort")},l},searchToObject:function(){var e,t,n=window.location.search.substring(1).split("&"),o={};for(t in n)""!==n[t]&&(e=n[t].split("="),o[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return o},countDown:function(t,n){var o=e(n).find(".day"),r=e(n).find(".hour"),i=e(n).find(".minute"),a=e(n).find(".second"),s=new Date(t).getTime(),c=(s-(new Date).getTime())/1e3,u=setInterval(function(){if(c>1){c-=1;var t=Math.floor(c/3600/24),n=Math.floor(c/3600%24),s=Math.floor(c/60%60),l=Math.floor(c%60);o&&e(o).text(t),e(r).text(n<10?"0"+n:n),e(i).text(s<10?"0"+s:s),e(a).text(l<10?"0"+l:l)}else clearInterval(u)},1e3)},toUnix:function(e){var t=e.replace(/:/g,"-");t=t.replace(/ /g,"-");var n=t.split("-"),o=new Date(Date.UTC(n[0],n[1]-1,n[2],n[3]-8,n[4],n[5]));return parseInt(o.getTime()/1e3)},toDatetime:function(e){var t=new Date(1e3*parseInt(e));return t.toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")},deleteByValue:function(t,n){var o=e.grep(t,function(e,t){return e!=n});return o},deleteByIndex:function(t,n){var o=e.grep(t,function(e,t){return t!=n});return o},getUrlParam:function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=e.search.substr(1).match(n);return null!=o?unescape(o[2]):null},hasError:function(t){if(e.isPlainObject(t)&&t.code){var n=t.code;if("0"!==n)return!1}return!0},getAbsoluteUrl:function(e){return e},getAuthInfo:function(){var e=this.getSession("_passport"),t={_app:"shop",_platform:"web"};return e&&(t._passport=e),t},setAuthInfo:function(e){var t=e&&e._passport;this.setSession("_passport",t)},clearAuthInfo:function(){this.delSession("_passport")},catchCommonError:function(t){if(!e.isPlainObject(t)||!t.error_code)return t;var n=t.error_code;t.message;switch(n){case"10000":this._noLogin(t);break;case"10001":this._noLogin(t)}return t},parseUrl:function(e){var t=new RegExp(/^([^:]+):\/\/(?:([^:@]+)(?::([^@]+))?@)?([^:\/]+)(?:\:([0-9]*))?([^#\?]+)?(?:\?([^#]+))?(#.+)?$/gi),n=new RegExp("([^/]+)","g"),o=new RegExp("([^=&]+)=([^&]+)","g"),r={url:e},i=t.exec(e);if(null!==i){r.protocol=i[1]||"",r.user=i[2]||"",r.password=i[3]||"",r.subdomain=i[4]||"",r.domain=i[4]||"",r.port=i[5]||"",r.path=i[6]||"",r.query=i[7]||"",r.hash=i[8]||"";var a=r.path.match(n);r.parsePath=null===a?[]:a;var s={};return r.query.replace(o,function(e,t,n){return s[t]=n,e}),r.parseQuery=s,r}},getUrl:function(t,n){return t+=t.indexOf("?")!==-1?"&"+e.param(n):"?"+e.param(n)},getUrlParam:function(){var e=this.parseUrl(window.location.href);return e&&e.parseQuery},getSession:function(t){return sessionStorage?sessionStorage.getItem(t):e.cookie(t)},setSession:function(t,n){sessionStorage?sessionStorage.setItem(t,n):e.cookie(t,n,{path:"/"})},delSession:function(t){sessionStorage?sessionStorage.removeItem(t):e.removeCookie(t,{path:"/"})},getHtmlUrl:function(e){return this.clientRoot+e},_checkPageAuth:function(){var t=this,n=e("body").hasClass("hidden");if(!n)return!0;var o=this.getSession("_passport"),r={_app:"shop",_platform:"web",_passport:o},i="/Home/Login/check";e.ajax({async:!1,data:r,url:this.getAbsoluteUrl(i)}).then(function(e){t.catchCommonError(e)})},_checkLogin:function(){var t=this,n=e("body").hasClass("hidden");if(!n)return!0;var o=t.getSession("_passport");if(null===o){alert("请先登录，再操作！");var r=t.getHtmlUrl("html/user/login-64664234ad.html"),i=window.encodeURI(window.location.href);window.location.href=r,t.setSession("returnLink",i),console.log(i)}else e("body").removeClass("hidden")},_noLogin:function(e){var t=e.url;t+=window.encodeURI(window.location.href),window.location.href=t},_setLoginData:function(){var e=window.location.href,t=this.getUrlParam(e);t&&t._passport&&this.setAuthInfo(t)}};return t._setLoginData(),t._checkLogin(),t});