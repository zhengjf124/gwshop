!function(a,s,e,t){var i=function(){this.init()};i.prototype={params:{offset:0,limit:0,total:0,pages:0,orderBy:"",keywords:"",loadTemp:""},init:function(){this.initParams(),this.getDataParams(),this.initEvent()},initParams:function(){this.params.offset=0,this.params.limit=8,this.params.keywords=Pub.searchToObject().keyword,this.params.orderBy="order_sort-desc",this.params.loadTemp='<div class="loader"><div class="loader-inner ball-spin-fade-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>'},getDataParams:function(){var s=this;a("#goods_list").html(s.params.loadTemp),Pub.post("/Home/goods/index",{offset:s.params.offset,limit:s.params.limit,keyword:s.params.keywords,order_by:s.params.orderBy},function(e){0===parseInt(e.error_code)&&(s.params.total=e.data.count,s.params.pages=Math.ceil(s.params.total/s.params.limit),setTimeout(function(){s.pages(s.params.pages),s.pagesEvent(s.params.pages)},600),s.goodsList(e.data.list),a("#goods_count").text(s.params.total),a("#page_now").text(s.params.offset+1),a("#page_total").text(s.params.pages))})},getData:function(){var s=this;a("#goods_list").html(s.params.loadTemp),Pub.post("/Home/goods/index",{offset:s.params.offset,limit:s.params.limit,keyword:s.params.keywords,order_by:s.params.orderBy},function(a){0===parseInt(a.error_code)&&s.goodsList(a.data.list)})},goodsList:function(s){var e="";if(s&&s.length>0){for(var t in s)s.hasOwnProperty(t)&&(e+='<li><a href="'+Pub.getHtmlUrl("html/goods/cont-4ec8c688d1.html")+"?id="+s[t].id+'"><div class="img"><img src="'+s[t].goods_img+'" class="img-scale"></div><div class="info"><div class="name">'+s[t].goods_name+'</div><div class="price">￥'+s[t].goods_price+"</div></div></a></li>");setTimeout(function(){a("#goods_list").html(e)},500)}else a("#goods_list").html('<div class="nothing">暂无数据！</div>')},pages:function(s){var e="";if(s>0){a("#allpage").empty(),e+='<a class="prev" id="prev">上一页</a><span class="pages" id="pages"><span class="page">';for(var t=1;t<=s;t++)e+="<a>"+t+"</a>";e+='</span></span><a class="next" id="next">下一页</a>',a("#allpage").append(e)}},pagesEvent:function(s){var e=this;a("#pages a:nth-child(1)").addClass("active"),e.checkDis();for(var t=1;t<=e.params.pages;t++)a("#pages a").on("click",function(){a(this).is(".active")||(a(this).siblings().removeClass("active"),a(this).addClass("active"),e.params.offset=(a(this).text()-1)*e.params.limit,e.getData()),e.checkDis(),e.goPage(s),a("#page_now").text(a(".page").find(".active").text())});a("#prev").on("click",function(){e.params.offset=e.params.offset-e.params.limit,e.getData(),a("#pages").find(".active").removeClass("active").prev().addClass("active"),e.checkDis(),e.goPage(s),a("#page_now").text(a(".page").find(".active").text())}),a("#next").on("click",function(){e.params.offset=e.params.offset+e.params.limit,e.getData(),a("#pages").find(".active").removeClass("active").next().addClass("active"),e.checkDis(),e.goPage(s),a("#page_now").text(a(".page").find(".active").text())}),a("#page_up").on("click",function(){e.params.offset=e.params.offset-e.params.limit,e.getData(),a("#pages").find(".active").removeClass("active").prev().addClass("active"),e.checkDis(),e.goPage(s),a("#page_now").text(a(".page").find(".active").text())}),a("#page_down").on("click",function(){console.log(e.params.offset),e.params.offset=e.params.offset+e.params.limit,a("#pages").find(".active").removeClass("active").next().addClass("active"),console.log(a(".page").find(".active").text()),e.getData(),e.checkDis(),e.goPage(s),a("#page_now").text(a(".page").find(".active").text())})},goPage:function(s){var e=a(".page a").width()+12,t=e*a(".page a").length,i=e*(a(".page a").length-3),o=46*a(".page").find(".active").text();s<=5?a(".page").css("width",t).animate({left:"0px"},50):o<=138?a(".page").css("width",t).animate({left:"0px"},50):o>138&&o<=i?a(".page").css("width",t).animate({left:-(o-138)+"px"},50):a(".page").css("width",t).animate({left:"-184px"},50)},checkDis:function(){var s=this;0===s.params.offset?a(".prev").addClass("disabled"):a(".prev").removeClass("disabled"),s.params.offset==s.params.limit*(s.params.pages-1)?a(".next").addClass("disabled"):a(".next").removeClass("disabled")},initEvent:function(){var s=this;a(".sort1").on("click",function(){a(this).is(".active")||(a(this).siblings().removeClass("active"),a(this).siblings().removeClass("active-down"),a(this).siblings().addClass("acnone"),a(this).removeClass("acnone"),a(this).addClass("active"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_sort-desc",s.getData(),s.pages(s.params.pages),s.pagesEvent())}),a(".sort2").on("click",function(){a(this).siblings().removeClass("active"),a(this).siblings().removeClass("active-down"),a(this).siblings().addClass("acnone"),a(this).is(".acnone")?(a(this).removeClass("acnone"),a(this).addClass("active"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_sales-asc",s.getData(),s.pages(s.params.pages),s.pagesEvent()):a(this).is(".active")?(a(this).removeClass("active"),a(this).addClass("active-down"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_sales-desc",s.getData(),s.pages(s.params.pages),s.pagesEvent()):a(this).is(".active-down")&&(a(this).removeClass("active-down"),a(this).addClass("active"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_sales-asc",s.getData(),s.pages(s.params.pages),s.pagesEvent())}),a(".sort3").on("click",function(){a(this).siblings().removeClass("active"),a(this).siblings().removeClass("active-down"),a(this).siblings().addClass("acnone"),a(this).is(".acnone")?(a("#goods_list").empty(),a(this).removeClass("acnone"),a(this).addClass("active"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_price-asc",s.getData(),s.pages(s.params.pages),s.pagesEvent()):a(this).is(".active")?(a(this).removeClass("active"),a(this).addClass("active-down"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_price-desc",s.getData(),s.pages(s.params.pages),s.pagesEvent()):a(this).is(".active-down")&&(a(this).removeClass("active-down"),a(this).addClass("active"),a("#page_now").text(1),s.params.offset=0,s.params.orderBy="order_price-asc",s.getData(),s.pages(s.params.pages),s.pagesEvent())})}};new i}(jQuery,window,document);