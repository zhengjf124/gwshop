!function(s,a,i,t){var o=function(){this.init()};return o.prototype={params:{orderBy:"",offset:0,limit:0,cartId:0,keyWord:"",count:0},initParams:function(){this.params.orderBy="order_sort-desc",this.params.offset=0,this.params.limit=4,this.params.cartId=Pub.searchToObject().id,this.params.keyWord=Pub.searchToObject().keyword},init:function(){this.initParams(),this.loadData(),this.initEvent()},getData:function(s){var a=this;Pub.post("/Home/goods/index",{order_by:a.params.orderBy,offset:a.params.offset,limit:a.params.limit,cart_id:a.params.cartId,keyword:a.params.keyWord},function(i){0===i.error_code&&(a.params.count=i.data.count,a.params.offset+=a.params.limit,a.listData(s,i.data.list))})},listData:function(a,i){var t=this,o="";if(i.length>0){for(var e in i)if(o+='<li><a href="'+Pub.getHtmlUrl("html/goods/cont.fb80c266.html")+"?id="+i[e].id+'"><div class="img"><span></span><img src="'+i[e].goods_img+'"></div><div class="info"><div class="name">'+i[e].goods_name+'</div><div class="brief"><h5>'+i[e].goods_brief+'</h5></div><div class="tag">',1==i[e].is_new&&(o+='<span class="new">新品</span>'),1==i[e].is_hot&&(o+='<span class="hot">热卖</span>'),o+='</div><div class="price"><span>￥'+i[e].goods_price+"</span><del>￥"+i[e].market_price+"</del><em>评论"+i[e].comment_count+"条</em></div></div></a></li>",t.params.offset>=t.params.count){a.lock("down"),a.noData();break}s("#list").append(o),a.resetload()}0===parseInt(t.params.count)&&(s("#list").append('<div class="nothing">暂无数据！</div>'),s("#list").siblings().remove())},loadData:function(){var i=this;s("#list_container").dropload({scrollArea:a,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh">↓下拉刷新</div>',domUpdate:'<div class="dropload-update">↑释放刷新</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>刷新中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>数据加载中...</div>',domNoData:'<div class="dropload-noData"><!--数据已全部加载！--></div>'},loadUpFn:function(s){setTimeout(function(){a.location.reload()},600),s.resetload()},loadDownFn:function(s){i.getData(s)},threshold:150,autoLoad:!0,distance:50})},toSearch:function(){var s=Pub.getHtmlUrl("html/search.14d5bf70.html");location.href=s},initEvent:function(){var a=this;s("#txt_search").on("click",a.toSearch),s("#sub_search").on("click",a.toSearch),s(".sort1").on("click",function(){s("#list").empty(),s(this).siblings().removeClass("active"),s(this).siblings().removeClass("active-up"),s(this).siblings().addClass("acnone"),s(this).removeClass("acnone"),s(this).addClass("active"),a.params.offset=0,a.params.orderBy="order_sort-desc",s("#list_container").find(".dropload-down").remove(),a.loadData()}),s(".sort2").on("click",function(){s("#list").empty(),s(this).siblings().removeClass("active"),s(this).siblings().removeClass("active-up"),s(this).siblings().addClass("acnone"),s(this).is(".acnone")?(s("#list").empty(),s(this).removeClass("acnone"),s(this).addClass("active"),a.params.offset=0,a.params.orderBy="order_sales-desc",s("#list_container").find(".dropload-down").remove(),a.loadData()):s(this).is(".active")?(s("#list").empty(),s(this).removeClass("active"),s(this).addClass("active-up"),s(this).children("i").html("&#xe6d7;"),a.params.offset=0,a.params.orderBy="order_sales-asc",s("#list_container").find(".dropload-down").remove(),a.loadData()):s(this).is(".active-up")&&(s("#list").empty(),s(this).removeClass("active-up"),s(this).addClass("active"),s(this).children("i").html("&#xe6d8;"),a.params.offset=0,a.params.orderBy="order_sales-desc",s("#list_container").find(".dropload-down").remove(),a.loadData())}),s(".sort3").on("click",function(){s("#list").empty(),s(this).siblings().removeClass("active"),s(this).siblings().removeClass("active-up"),s(this).siblings().addClass("acnone"),s(this).is(".acnone")?(s("#list").empty(),s(this).removeClass("acnone"),s(this).addClass("active"),a.params.offset=0,a.params.orderBy="order_price-desc",s("#list_container").find(".dropload-down").remove(),a.loadData()):s(this).is(".active")?(s("#list").empty(),s(this).removeClass("active"),s(this).addClass("active-up"),s(this).children("i").html("&#xe6d7;"),a.params.offset=0,a.params.orderBy="order_price-asc",s("#list_container").find(".dropload-down").remove(),a.loadData()):s(this).is(".active-up")&&(s("#list").empty(),s(this).removeClass("active-up"),s(this).addClass("active"),s(this).children("i").html("&#xe6d8;"),a.params.offset=0,a.params.orderBy="order_price-desc",s("#list_container").find(".dropload-down").remove(),a.loadData())})}},new o}(jQuery,window,document);